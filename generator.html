<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>CBT ë¬¸ì œ ìƒì„±ê¸°</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 25px;
            background: #f7f7f7;
        }
        h1 {
            font-size: 26px;
            margin-bottom: 10px;
        }

        .section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 0 8px rgba(0,0,0,0.1);
        }

        label {
            font-weight: bold;
        }

        select, input {
            padding: 7px;
            margin-top: 5px;
            margin-bottom: 15px;
            width: 100%;
            border-radius: 6px;
            border: 1px solid #ccc;
        }

        #generateBtn {
            background: #333;
            color: white;
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
            width: 100%;
            border: none;
            font-size: 16px;
        }

        #previewBox {
            margin-top: 20px;
        }

        .preview-item {
            background: #fff;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 12px;
            border-left: 5px solid #888;
        }
    </style>
</head>

<body>

    <h1>ğŸ“˜ CBT ë¬¸ì œ ìƒì„±ê¸°</h1>

    <!-- API KEY ì €ì¥ -->
    <div class="section">
        <label>OpenAI API KEY</label>
        <input type="password" id="apiKeyInput" placeholder="sk-..." />
        <button onclick="saveKey()">API KEY ì €ì¥</button>
    </div>

    <!-- ë¬¸ì œ ìƒì„± ì˜µì…˜ -->
    <div class="section">
        <label>ë‹¨ì› ì„ íƒ</label>
        <select id="unitSelect">
            <option value="">-- ë‹¨ì› ì„ íƒ --</option>
            <option value="ìë£Œì¡°ì‚¬ë¶„ì„">ìë£Œì¡°ì‚¬ë¶„ì„</option>
            <option value="ê¸°íš">ê¸°íš</option>
            <option value="ì‹œê³µê´€ë¦¬">ì‹œê³µê´€ë¦¬</option>
            <option value="ê¸°ë³¸ê³„íš">ê¸°ë³¸ê³„íš</option>
            <option value="ì„¸ë¶€ê³µê°„ê³„íš">ì„¸ë¶€ê³µê°„ê³„íš</option>
            <option value="ì‹¤ë¬´ë„ì„œì‘ì„±">ì‹¤ë¬´ë„ì„œì‘ì„±</option>
            <option value="ì„¤ê³„ë„ì„œì‘ì„±">ì„¤ê³„ë„ì„œì‘ì„±</option>
            <option value="í”„ë ˆì  í…Œì´ì…˜">í”„ë ˆì  í…Œì´ì…˜</option>
        </select>

        <label>ë¬¸ì œìœ í˜•</label>
        <select id="typeSelect">
            <option value="">-- ë¬¸ì œìœ í˜• ì„ íƒ --</option>
            <option value="4ì§€ì„ ë‹¤í˜•">4ì§€ì„ ë‹¤í˜•</option>
            <option value="ë³µìˆ˜ì„ íƒí˜•">ë³µìˆ˜ì„ íƒí˜•</option>
            <option value="ì§„ìœ„í˜•">ì§„ìœ„í˜•</option>
            <option value="ë‹¨ë‹µí˜•">ë‹¨ë‹µí˜•</option>
            <option value="ì—°ê²°í˜•">ì—°ê²°í˜•</option>
        </select>

        <label>ìƒì„±í•  ë¬¸ì œ ìˆ˜</label>
        <input type="number" id="countInput" value="1" min="1" max="20" />

        <label>ì¶œì œì(ì„ íƒ)</label>
        <input type="text" id="authorInput" placeholder="ì˜ˆ: ì¥ìŠ¹ì›" />

        <button id="generateBtn">ë¬¸ì œ ìƒì„±í•˜ê¸°</button>
    </div>

    <!-- ë¯¸ë¦¬ë³´ê¸° -->
    <div class="section">
        <h2>ğŸ” ìƒì„±ëœ ë¬¸ì œ ë¯¸ë¦¬ë³´ê¸°</h2>
        <div id="previewBox"></div>
    </div>

    <!-- JS íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸° -->
    <script type="module">
        import { setApiKey } from "./openai.js";
        import "./generator.js";

        window.saveKey = function() {
            const key = document.getElementById("apiKeyInput").value.trim();
            if (!key) return alert("API KEYë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
            setApiKey(key);
            alert("API KEY ì €ì¥ ì™„ë£Œ");
        };
    </script>

</body>
</html>
